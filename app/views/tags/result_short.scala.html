@* Copyright 2014 Fabian Steeg, hbz. Licensed under the Eclipse Public License 1.0 *@
@(id:String, doc: play.api.libs.json.JsValue)

@import play.api.libs.json._
@import views.TagHelper
@import controllers.nwbib.Lobid

@optional(doc: JsValue, key: String, sep: String, alt: String)={
    @defining((doc \\ key)) { other =>
      @if(!other.isEmpty){
        @sep@(other(0).asOpt[String].getOrElse(other(0).as[Seq[JsValue]].map(_.as[String]).mkString("; ")))
      } else {@alt}
    }
}

@defining((doc\\"@type").last.asOpt[Seq[String]].getOrElse(Seq((doc\\"@type").last.asOpt[String].get))){t=>
<tr>
  <td> <span class="@Lobid.typeIcon(t)"></span> </td>
  <td> <a href="@nwbib.routes.Application.show(id)">
    @optional(doc, "title", "", "<Kein Titel>") @optional(doc, "otherTitleInformation", " | ", "")</a></td>
  <td style="text-align: right"> @optional(doc, "issued", "", "") </td>
</tr>
}